### 当前收录统计

50 个博客、8695 篇博文, 占用空间 15.967 GB

更近的统计 [请见原型演示](http://nobodxbodon.github.io/)。

### 使用

#### 预先准备

python 3.8，其他版本可能生成网页不同。

依赖库：
- bs4
- jinja2
- mistune

创建两个空目录：
- 源数据/博客聚合
- html

#### 常用

- 【手动】可在 `原型/仓库列表.csv` 的基础上新添仓库，包括 url 和 下载目录
- 【脚本】运行 `git同步`，看下载正常，也可看到某库有改动（TODO：提取修改信息？）
- 【脚本】运行 `生成`，从 md/rst 等格式源文件生成对应网页，以便本地浏览新添内容；如果原内容为 html 则直接使用。

### 运行方法

安装 [木兰](https://pypi.org/project/ulang/) 后在根目录下运行:
```shell
$ 木兰 原型/git同步.ul
```
- 同步 [内置仓库列表](仓库列表.csv) 中所有 git 仓库内容，新仓库则 clone，已有仓库则 pull。如 pull 报错，则备份后再 clone。

```shell
$ 木兰 原型/生成.ul
```
- 列出所有 [博文目录](博文目录.csv)：所在博客，时间戳，题目; 生成对应 HTML 文件，以及一个索引页，最新博文排序在前
- 加任何选项后，仅作 [统计](统计数据.csv)：所在博客，博文篇数，所占空间（MB），更新时间，最新博文

性能: 在 1300 篇博客时十秒左右；如机械硬盘，八千篇 3 分钟左右。

### 评论功能

在开头 YAML 部分添加“回复: 【评论对象的题目】”，首页被评论的博文会显示评论数，文章头部的评论区包含评论链接。

### 待改进

标 [x] 的已完成。

- 仓库同步
  - 报告: 哪个博客新加几篇内容等
- [x] 网页本地打开时显示本地图片，如: 《Three.js 入门与扫盲-基础结构,坐标系与几何类型介绍》。在线演示不支持。
- 支持指定仓库分支并自动切换，如 [qingbob.com](https://github.com/hh54188/jekyll-blog) 使用 gh-pages 分支；jaredtao.gitee.io 的 md 在分支 tao，在此之前需手动切换分支
- 搜索
  - [x] 按题目关键词
  - 全文搜索关键词
  - 按域名
  - 按特征，如带图片的，更新时间范围等
  - 支持中文搜索英文内容. 如搜索"足球"可搜到 football 相关
- 其他排序方式(默认越新越前)
- 预设兴趣(关键词等)，匹配的博文排序靠前
- 充分利用 md 文件头部信息
  - 分类、关键词等
  - cover 图片显示
- 仓库列表检查
  - 查重
  - 如无法连接需标记
- html 渲染
  - 如果 md 题目未改而内容修改，仍需更新网页内容
  - 删除头部 --- 部分，添加题目/在线博客等信息
  - 格式有误: www.barretlee.com/让音乐响起来.html
